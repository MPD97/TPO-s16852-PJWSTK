package zad1;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javafx.application.Platform;
import javafx.collections.ObservableList;
import javafx.embed.swing.JFXPanel;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import com.sun.javafx.application.PlatformImpl;

public class SwingFXView extends JPanel {  
    
   private Stage stage;  
   private WebView browser;  
   
   private JFXPanel wikiPanel;  
   private JFXPanel infoPanel;  

   private JButton swingButton;  
   private WebEngine webEngine;  
   private Service service;
 
   public SwingFXView(Service service){  
       initComponents();  
       this.service = service;
   }  
 
    
   private void initComponents(){  
        
       wikiPanel = new JFXPanel();  
       infoPanel = new JFXPanel()
       createScene();  
        
       setLayout(new BorderLayout());  
       add(wikiPanel, BorderLayout.CENTER);  
       add(infoPanel, BorderLayout.LINE_END);

       swingButton = new JButton();  
       JButton swingButton2 = new JButton();  
       JButton swingButton3 = new JButton();  

       infoPanel.add(swingButton2);
      
       swingButton.addActionListener(new ActionListener() {

           @Override
           public void actionPerformed(ActionEvent e) {
               Platform.runLater(new Runnable() {

                   @Override
                   public void run() {
                       webEngine.reload();
                   }
               });
           }
       });  
       swingButton.setText("Reload");  
        
       add(swingButton, BorderLayout.PAGE_END);  
       add(swingButton2, BorderLayout.PAGE_END);  
       add(swingButton3, BorderLayout.PAGE_END);  

   }     
    
   private void createScene() {  
       PlatformImpl.startup(new Runnable() {  
           @Override
           public void run() {  
                
               stage = new Stage();  
                
               stage.setTitle("Hello Java FX");  
               stage.setResizable(true);  
  
               Group root = new Group();  
               Scene scene = new Scene(root,80,20);  
               stage.setScene(scene);  
                
               // Set up the embedded browser:
               browser = new WebView();
               webEngine = browser.getEngine();
               webEngine.load("https://pl.wikipedia.org/wiki/" + service.getCountry());
               
               ObservableList<Node> children = root.getChildren();
               children.add(browser);  
                
               wikiPanel.setScene(scene);  
           }  
       });  
   }
}